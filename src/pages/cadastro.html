<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="../../public/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Crie sua conta no Colheita Certa e comece a aumentar sua renda no campo com tecnologia simples" />
    <title>Cadastro - Colheita Certa</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../styles/reset.css" />
    <link rel="stylesheet" href="../styles/common.css" />
    <link rel="stylesheet" href="../styles/contato.css" />
    <link rel="stylesheet" href="../styles/cadastro.css" />
</head>
<body>
    <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>
    
    <header class="header">
      <nav class="nav-container" aria-label="Navegação principal">
        <div class="nav-wrapper">
          <a href="../../index.html" class="logo-button" aria-label="Voltar para a página inicial">
            <img src="../../public/logo.svg" alt="Logo Colheita Certa" class="logo-image" />
            <span class="logo-text">Colheita Certa</span>
          </a>

          <input type="checkbox" id="menu-toggle" class="menu-toggle" />
          <label for="menu-toggle" class="mobile-menu-btn" aria-label="Abrir menu">
            <i class="bi bi-list menu-icon" aria-hidden="true"></i>
            <i class="bi bi-x close-icon" aria-hidden="true"></i>
          </label>

          <ul class="nav-menu" role="menubar">
            <li role="none">
              <a href="../../index.html" class="nav-link" role="menuitem">Início</a>
            </li>
            <li role="none">
              <a href="./solucoes.html" class="nav-link" role="menuitem">Soluções</a>
            </li>
            <li role="none">
              <a href="./recursos.html" class="nav-link" role="menuitem">Recursos</a>
            </li>
            <li role="none">
              <a href="./contato.html" class="nav-link" role="menuitem">Contato</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <main id="main-content" role="main">
        <section class="hero-banner">
            <div class="container">
                <h1>Crie sua conta no Colheita Certa</h1>
                <p>Comece agora a aumentar sua renda e reduzir perdas no campo. O cadastro é rápido, simples e totalmente gratuito</p>
            </div>
        </section>

        <section class="contact-section">
            <div class="container">
                <div class="contact-grid">
                    <div class="contact-info">
                        <h2 class="section-title">Por que se cadastrar?</h2>
                        <p class="contact-intro">Ao criar sua conta, você terá acesso a todas as ferramentas da plataforma</p>

                        <div class="info-cards">
                            <div class="info-card">
                                <div class="info-icon">
                                    <i class="bi bi-shop"></i>
                                </div>
                                <div class="info-content">
                                    <h3>Mercado Digital</h3>
                                    <p>Venda direto ao consumidor e para empresas, sem atravessadores</p>
                                </div>
                            </div>

                            <div class="info-card">
                                <div class="info-icon">
                                    <i class="bi bi-cloud-sun"></i>
                                </div>
                                <div class="info-content">
                                    <h3>Orientação Técnica</h3>
                                    <p>Receba alertas climáticos e calendário de plantio personalizado</p>
                                </div>
                            </div>

                            <div class="info-card">
                                <div class="info-icon">
                                    <i class="bi bi-graph-up"></i>
                                </div>
                                <div class="info-content">
                                    <h3>Controle Financeiro</h3>
                                    <p>Registre sua produção e acompanhe seus lucros de forma simples</p>
                                </div>
                            </div>

                            <div class="info-card">
                                <div class="info-icon">
                                    <i class="bi bi-people"></i>
                                </div>
                                <div class="info-content">
                                    <h3>Rede de Apoio</h3>
                                    <p>Conecte-se com outros produtores e técnicos especializados</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="contact-form-wrapper">
                        <h2 class="section-title">Criar conta</h2>
                        <form class="contact-form" id="signupForm" novalidate>
                            <div class="form-group">
                                <label for="name">Nome Completo *</label>
                                <input type="text" id="name" name="name" required placeholder="Seu nome completo">
                            </div>

                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" id="email" name="email" required placeholder="seu@email.com">
                            </div>

                            <div class="form-group">
                                <label for="phone">Telefone *</label>
                                <input type="tel" id="phone" name="phone" required placeholder="(00) 00000-0000">
                            </div>

                            <div class="form-group">
                                <label for="password">Senha *</label>
                                <input type="password" id="password" name="password" required placeholder="Mínimo 6 caracteres" minlength="6">
                            </div>

                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="terms" name="terms" required>
                                    <span>Aceito os termos de uso e política de privacidade *</span>
                                </label>
                            </div>

                            <button type="submit" class="btn btn-primary btn-submit">
                                <i class="bi bi-check-circle"></i>
                                Criar cadastro
                            </button>

                            <div class="form-success" id="successMessage" style="display: none;">
                                <i class="bi bi-check-circle-fill"></i>
                                <p>Cadastro criado com sucesso! Redirecionando...</p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
      <div class="footer-container">
        <section class="footer-section" aria-labelledby="footer-about">
          <div class="footer-logo">
            <img src="../../public/logo-white.png" alt="Logo Colheita Certa" class="footer-logo-image" />
            <span>Colheita Certa</span>
          </div>
          <p class="footer-description">
            A plataforma completa que ajuda pequenos produtores a aumentar sua renda e reduzir perdas através da tecnologia.
          </p>
        </section>
        
        <nav class="footer-section" aria-labelledby="footer-links">
          <h3 id="footer-links">Links Rápidos</h3>
          <ul class="footer-links">
            <li><a href="../../index.html" class="footer-link">Início</a></li>
            <li><a href="./solucoes.html" class="footer-link">Soluções</a></li>
            <li><a href="./recursos.html" class="footer-link">Recursos</a></li>
            <li><a href="./contato.html" class="footer-link">Contato</a></li>
          </ul>
        </nav>

        <section class="footer-section" aria-labelledby="footer-info">
          <h3 id="footer-info">Sobre</h3>
          <p class="footer-info-text">Desenvolvido pela equipe RAP como parte do projeto Agrotech.</p>
          <p class="footer-info-text">Alinhado aos objetivos de desenvolvimento sustentável da ONU.</p>
        </section>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 Colheita Certa. Tecnologia para transformar a agricultura familiar</p>
      </div>
    </footer>

    <script>
       document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('signupForm');
    const phoneInput = document.getElementById('phone');
    
    // --- MÁSCARA DE TELEFONE EM TEMPO REAL ---
    // Reutiliza a mesma lógica de contato.js
    if (phoneInput) {
        phoneInput.addEventListener('input', phoneMask);
    }
    
    function phoneMask(event) {
        const target = event.target;
        // 1. Remove tudo que não for dígito
        let value = target.value.replace(/\D/g, ''); 
        let formattedValue = '';
        
        // 2. Aplica a máscara (DD) XXXX-XXXX ou (DD) XXXXX-XXXX
        
        // Se tiver mais de 10 dígitos (celular com 9), aplica (XX) XXXXX-XXXX
        if (value.length > 10) {
            formattedValue = `(${value.substring(0, 2)}) ${value.substring(2, 7)}-${value.substring(7, 11)}`;
        } 
        // Se tiver 10 dígitos (celular ou fixo antigo), aplica (XX) XXXX-XXXX
        else if (value.length > 6) {
            formattedValue = `(${value.substring(0, 2)}) ${value.substring(2, 6)}-${value.substring(6, 10)}`;
        } 
        // Se tiver apenas o DDD
        else if (value.length > 2) {
            formattedValue = `(${value.substring(0, 2)}) ${value.substring(2)}`;
        } 
        // Se tiver 2 dígitos (só o DD)
        else if (value.length > 0) {
            formattedValue = `(${value}`;
        }

        // Limita o tamanho máximo de caracteres
        if (formattedValue.length > 15) { // (11) 98765-4321 tem 15 caracteres
            formattedValue = formattedValue.substring(0, 15);
        }

        // Atualiza o valor do input, exceto se for a tecla backspace
        if (event.inputType !== 'deleteContentBackward') {
            target.value = formattedValue;
        }
    }
    // --- FIM DA MÁSCARA ---

    // --- LÓGICA DE VALIDAÇÃO AO ENVIAR ---
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // Impede o envio real para validar
        
        // 1. Limpa erros anteriores (reseta o estado visual)
        limparErros();
        
        let temErro = false;

        // --- VALIDAÇÃO 1: NOME COMPLETO ---
        const nomeInput = document.getElementById('name');
        const nomeValor = nomeInput.value.trim();
        const partesNome = nomeValor.split(/\s+/);
        
        if (!nomeValor) {
            mostrarErro(nomeInput, 'O campo nome é obrigatório.');
            temErro = true;
        } else if (partesNome.length < 2) {
            mostrarErro(nomeInput, 'Por favor, digite seu nome e sobrenome.');
            temErro = true;
        } else {
            const nomeValido = partesNome.every(parte => parte.length >= 2);
            if (!nomeValido) {
                mostrarErro(nomeInput, 'Nome e sobrenome devem ter no mínimo 2 letras cada.');
                temErro = true;
            }
        }

        // --- VALIDAÇÃO 2: E-MAIL ---
        const emailInput = document.getElementById('email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (!emailInput.value.trim()) {
            mostrarErro(emailInput, 'O e-mail é obrigatório.');
            temErro = true;
        } else if (!emailRegex.test(emailInput.value.trim())) {
            mostrarErro(emailInput, 'Digite um e-mail válido (ex: seu@email.com).');
            temErro = true;
        }

        // --- VALIDAÇÃO 3: TELEFONE ---
        const phoneValor = phoneInput.value.trim();
        const phoneNumeros = phoneValor.replace(/\D/g, ''); 

        if (!phoneValor) {
            mostrarErro(phoneInput, 'O telefone é obrigatório.');
            temErro = true;
        } else if (phoneNumeros.length < 10) {
            mostrarErro(phoneInput, 'Telefone incompleto. Use (DD) XXXX-XXXX.');
            temErro = true;
        } else if (phoneNumeros.length > 11) {
            mostrarErro(phoneInput, 'Telefone com dígitos a mais.');
            temErro = true;
        }

        // --- VALIDAÇÃO 4: SENHA ---
        const passwordInput = document.getElementById('password');
        const passwordValor = passwordInput.value;
        
        if (!passwordValor) {
            mostrarErro(passwordInput, 'A senha é obrigatória.');
            temErro = true;
        } else if (passwordValor.length < 6) {
            mostrarErro(passwordInput, 'A senha deve ter no mínimo 6 caracteres.');
            temErro = true;
        }

        // --- VALIDAÇÃO 5: TERMOS DE USO ---
        const termsInput = document.getElementById('terms');
        
        if (!termsInput.checked) {
            mostrarErro(termsInput, 'Você precisa aceitar os termos de uso para continuar.');
            temErro = true;
        }

        // --- RESULTADO FINAL ---
        if (!temErro) {
            const successMessage = document.getElementById('successMessage');
            
            successMessage.style.display = 'flex';
            successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            console.log('Cadastro validado com sucesso!');
            console.log('Nome:', nomeValor);
            console.log('Email:', emailInput.value.trim());
            console.log('Telefone:', phoneValor);
            
            // Exibe o alert de sucesso
            alert('Cadastro criado com sucesso!');
            
            // Redireciona para a página inicial após 1 segundo
            setTimeout(() => {
                window.location.href = '../../index.html';
            }, 1000);
        }
    });
});

// --- FUNÇÕES AUXILIARES ---
// Reutiliza as mesmas funções de contato.js

function mostrarErro(input, mensagem) {
    input.classList.add('input-error');
    
    const erroSmall = document.createElement('small');
    erroSmall.className = 'error-message';
    erroSmall.innerHTML = '<i class="bi bi-exclamation-circle"></i> ' + mensagem;
    
    const formGroup = input.parentElement;
    formGroup.appendChild(erroSmall);

    console.log('Erro adicionado no campo:', input.id);
}

function limparErros() {
    const inputs = document.querySelectorAll('.input-error');
    inputs.forEach(el => el.classList.remove('input-error'));
    
    const mensagens = document.querySelectorAll('.error-message');
    mensagens.forEach(el => el.remove());
    
    document.getElementById('successMessage').style.display = 'none';
}
 
    </script>
</body>
</html>
